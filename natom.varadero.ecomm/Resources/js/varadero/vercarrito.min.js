function EliminarItem(n){Carrito.EliminarItem(n,function(t){ActualizarTotales(t.totalesPedido);Carrito.ActualizarTotalizador(t);$("tr[pedidoDetalleId='"+n+"']").remove();$(".tblPedido tbody tr").length==0&&$(".btnContinuar").remove()})}function ActualizarTotales(n){var t=function(n){$.each(n.detalle,function(n,t){var i=$("tr[pedidoDetalleId='"+t.pedidoDetalleId+"']");$(i).find(".cantidad").val(t.cantidad).attr("original-value",t.cantidad);$(i).find(".porcentajeDescuento").html(t.tienePVP&&!t.tieneIVADisc?t.porcentajeDescuento:"");$(i).find(".precioUnitarioConDescuento").html("P.U.: "+t.precioUnitarioConDescuento);$(i).find(".precioUnitarioTotalConDescuento").html(t.precioUnitarioConDescuentoTotal);$(i).find(".precioUnitarioTotal").html(t.tienePVP&&!t.tieneIVADisc?t.precioUnitario:"")});$(".iva").html(n.iva);$(".subtotal").html(n.subtotal);$(".total").html(n.total)},i;n===undefined?(i=$("#PedidoIdCerrado").length==0?parseInt($("#PedidoId").val()):parseInt($("#PedidoIdCerrado").val()),Carrito.ObtenerTotalesPedido(i,function(n){n.success&&t(n.totalesPedido)})):t(n)}function asjl(){Mensajes.MostrarSiNo("Â¿Desea CONFIRMAR la orden?",function(){var n=$("#entregaEn").val();if(n=="-2"){Mensajes.MostrarError("Debe seleccionar el domicilio de Entrega");return}n=="-1"&&(n=null);eCommerce.DoPOST("eCommerce","ConfirmarPedido",{clienteDireccionId:n},function(n){n.success?location.href="/eCommerce/PedidoConfirmado?id="+n.pedidoId:(Mensajes.MostrarError(n.error),eCommerce.OcultarProcesando())},!1)})}$(document).ready(function(){ActualizarTotales();$(".cantidad").change(function(){var i=parseInt($(this).attr("pedidoDetalleId")),n=parseFloat($(this).val().replace(",",".")),r=$(this).attr("original-value"),t;if(isNaN(n)){$(this).val($(this).attr("original-value"));return}if(n<=0){$(this).val("1").trigger("change");return}$(this).attr("original-value",n);t=$(this);Carrito.UpdateCantidadItem(i,n,function(n){ActualizarTotales(n.totalesPedido)},function(){$(t[0]).val(r)})});$(".btnContinuar").click(asjl);$("#observaciones").change(function(){eCommerce.DoHiddenPOST("eCommerce","UpdateObservaciones",{pedidoId:$("#PedidoId").val(),observaciones:$(this).val()})})});